---
date: 2022-11-01
title: '2022년 11월 1일'
authors: [cmjeon]
tags: ['토비의스프링']
---

## 토비의스프링

### 1장 오브젝트와 의존관계 - 계속

리팩토링은 기능에는 변화를 주지 않는다.

UserDAO 에 다른 DB 커넥션 연결이 필요하다면 어떻게 해야할까?

일단 상속을 통한 확장을 고민해본다.

UserDAO 의 getConnection 을 추상메소드로 만들고, UserDAO 의 자식 클래스를 만들어서 getConnection() 을 구현하도록 할 수 있다.

이렇게 부모클래스에 기본적인 흐름과 추상 메소드를 만들고 자식클래스에서 추상 메소드를 구현하여 사용하는 방법을 템플릿 메소드 패턴 template method pattern 이라고 한다.

UserDAO 에서는 getConnection() 으로 Connection 타입의 객체를 사용하는 것에만 관심이 있을 수 있다.

그렇게 되면 getConnection() 으로 실제 Connection 객체를 생성하는 것은 자식클래스의 관심사항이다.

자식클래스에서 구체적인 오브젝트 생성 방법을 결정하게 하는 것을 팩토리 메소드 패턴 factory method pattern 이라고 한다.

상속구조를 통해 성격이 다른 관심사항을 분리한 코드를 만들었고, 서로 영향을 덜 주도록 했다.

> 서브클래스에서 오브젝트 생성 방법과 클래스를 결정할 수 있도록 미리 정의해둔 메소드를 팩토리 메소드라고 하고,
> 오브젝트 생성 방법을 나머지 로직이 있는 부모클래스로부터 독립시키는 방법을 팩토리 메소드 패턴이라고 한다.

팩토리 메소드와 팩토리 메소드 패턴의 팩토리 메소드는 의미가 다르다?

상속은 많은 한계점이 있다.

자바는 클래스의 다중상속을 허용하지 않는다.

상속관계는 두 가지 다른 관심사에 대한 긴밀한 결합을 허용하고, 자식클래스에서 부모클래스의 기능을 직접 사용할 수 있다.

UserDAO 외에 DAOa 클래스가 만들어질 때마다 getConnection() 의 구현 코드가 매 DAO 클래스마다 중복되서 나타나는 심각한 문제가 발생한다.


